<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml">
<head>
    <title>Tensorflow resize_images - Taesik's Blog</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



<link rel="canonical" href="https://taesikna.github.io/resize_images.html">

        <meta name="author" content="Taesik Na" />
        <meta name="keywords" content="python,tensorflow,resize,images" />
        <meta name="description" content="When we deal with the size of the images in Tensorflow, tf.image.resize_images() API will get the job done. Please check the official documents for this API here. In the official documents, we know that resize_images() has the form of def resize_images( images, size, method=ResizeMethod.BILINEAR, align_corners=False …" />

        <meta property="og:site_name" content="Taesik's Blog" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="Tensorflow resize_images"/>
        <meta property="og:url" content="https://taesikna.github.io/resize_images.html"/>
        <meta property="og:description" content="When we deal with the size of the images in Tensorflow, tf.image.resize_images() API will get the job done. Please check the official documents for this API here. In the official documents, we know that resize_images() has the form of def resize_images( images, size, method=ResizeMethod.BILINEAR, align_corners=False …"/>
        <meta property="article:published_time" content="2017-10-26" />
            <meta property="article:section" content="posts" />
            <meta property="article:tag" content="python" />
            <meta property="article:tag" content="tensorflow" />
            <meta property="article:tag" content="resize" />
            <meta property="article:tag" content="images" />
            <meta property="article:author" content="Taesik Na" />



    <!-- Bootstrap -->
        <link rel="stylesheet" href="https://taesikna.github.io/theme/css/bootstrap.min.css" type="text/css"/>
    <link href="https://taesikna.github.io/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="https://taesikna.github.io/theme/css/pygments/native.css" rel="stylesheet">
    <link rel="stylesheet" href="https://taesikna.github.io/theme/css/style.css" type="text/css"/>

        <link href="https://taesikna.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
              title="Taesik's Blog ATOM Feed"/>



        <link href="https://taesikna.github.io/feeds/posts.atom.xml" type="application/atom+xml" rel="alternate"
              title="Taesik's Blog posts ATOM Feed"/>

</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
	<div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="https://taesikna.github.io/" class="navbar-brand">
Taesik's Blog            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                         <li><a href="https://taesikna.github.io/pages/about_me.html">
                             About me
                          </a></li>
                        <li class="active">
                            <a href="https://taesikna.github.io/category/posts.html">Posts</a>
                        </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->
<!-- Banner -->
<!-- End Banner -->
<div class="container">
    <div class="row">
        <div class="col-sm-9">
    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="https://taesikna.github.io/resize_images.html"
                       rel="bookmark"
                       title="Permalink to Tensorflow resize_images">
                        Tensorflow resize_images
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2017-10-26T00:00:00-04:00"> Thu 26 October 2017</time>
    </span>





<span class="label label-default">Tags</span>
	<a href="https://taesikna.github.io/tag/python.html">python</a>
        /
	<a href="https://taesikna.github.io/tag/tensorflow.html">tensorflow</a>
        /
	<a href="https://taesikna.github.io/tag/resize.html">resize</a>
        /
	<a href="https://taesikna.github.io/tag/images.html">images</a>
    
</footer><!-- /.post-info -->                    </div>
                </div>
                <p>When we deal with the size of the images in Tensorflow, tf.image.resize_images() API will get the job done.
Please check the official documents for this API <a href="https://www.tensorflow.org/api_docs/python/tf/image/resize_images">here</a>.
In the official documents, we know that resize_images() has the form of</p>
<div class="highlight"><pre><span class="k">def</span> <span class="nf">resize_images</span><span class="p">(</span>
    <span class="n">images</span><span class="p">,</span>
    <span class="n">size</span><span class="p">,</span>
    <span class="n">method</span><span class="o">=</span><span class="n">ResizeMethod</span><span class="o">.</span><span class="n">BILINEAR</span><span class="p">,</span>
    <span class="n">align_corners</span><span class="o">=</span><span class="bp">False</span>
<span class="p">)</span>
</pre></div>


<p>where the arguments are,</p>
<ul>
<li><code>images</code>: 4-D Tensor of shape [batch, height, width, channels] or 3-D Tensor of shape [height, width, channels].</li>
<li><code>size</code>: A 1-D int32 Tensor of 2 elements: new_height, new_width. The new size for the images.</li>
<li><code>method</code>: ResizeMethod. Defaults to ResizeMethod.BILINEAR.</li>
<li><code>align_corners</code>: bool. If true, exactly align all 4 corners of the input and output. Defaults to false.</li>
</ul>
<p>Note that <code>size</code> argument is also the tensor.</p>
<p>I had to perform random down-sampling for given images tensor, so the necessary code snippet would be,</p>
<div class="highlight"><pre>  <span class="c1"># assuming &#39;images&#39; has the shape [batch_size, height, width, channels]</span>
  <span class="n">images_shape</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">shape</span><span class="p">(</span><span class="n">images</span><span class="p">)</span>
  <span class="n">height</span> <span class="o">=</span> <span class="n">image_shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
  <span class="n">width</span> <span class="o">=</span> <span class="n">image_shape</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>

  <span class="c1"># randomly select subsample factor to be 2 or 4</span>
  <span class="n">subsample</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">tf</span><span class="o">.</span><span class="n">random_uniform</span><span class="p">([],</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span> 
  <span class="n">down_height</span><span class="p">,</span> <span class="n">down_width</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">cond</span><span class="p">(</span><span class="n">tf</span><span class="o">.</span><span class="n">equal</span><span class="p">(</span><span class="n">subsample</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> 
                              <span class="k">lambda</span><span class="p">:</span> <span class="p">(</span><span class="n">tf</span><span class="o">.</span><span class="n">to_int32</span><span class="p">(</span><span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span> <span class="n">tf</span><span class="o">.</span><span class="n">to_int32</span><span class="p">(</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">)),</span>
                              <span class="k">lambda</span><span class="p">:</span> <span class="p">(</span><span class="n">tf</span><span class="o">.</span><span class="n">to_int32</span><span class="p">(</span><span class="n">height</span><span class="o">/</span><span class="mi">4</span><span class="p">),</span> <span class="n">tf</span><span class="o">.</span><span class="n">to_int32</span><span class="p">(</span><span class="n">width</span><span class="o">/</span><span class="mi">4</span><span class="p">)))</span>
  <span class="n">downsampled_images</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">resize_images</span><span class="p">(</span><span class="n">images</span><span class="p">,</span>
                                        <span class="p">[</span><span class="n">down_height</span><span class="p">,</span> <span class="n">down_width</span><span class="p">])</span>
</pre></div>


<p>Don't be confused with tensor indexing!!
When we slice the tensor, the indexing should be done with actual integer form.
I had to slice the tensor into two groups, so the necessary code snippet would be,</p>
<div class="highlight"><pre>    <span class="n">predictions_shape</span> <span class="o">=</span> <span class="n">class_predictions_with_background</span><span class="o">.</span><span class="n">get_shape</span><span class="p">()</span><span class="o">.</span><span class="n">as_list</span><span class="p">()</span>
    <span class="n">first_half_class_predictions_with_background</span> \
        <span class="o">=</span> <span class="n">class_predictions_with_background</span><span class="p">[:</span><span class="n">predictions_shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">/</span><span class="mi">2</span><span class="p">]</span>
    <span class="n">second_half_class_predictions_with_background</span> \ 
        <span class="o">=</span> <span class="n">class_predictions_with_background</span><span class="p">[</span><span class="n">predictions_shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">/</span><span class="mi">2</span><span class="p">:]</span>
</pre></div>


<p>Note that, we should get the shape of the tensor as list.</p>
            </div>
            <!-- /.entry-content -->
        </article>
    </section>

        </div>
        <div class="col-sm-3" id="sidebar">
            <aside>
<!-- Sidebar -->
<section class="well well-sm">
  <ul class="list-group list-group-flush">

<!-- Sidebar/Social -->
<li class="list-group-item">
  <h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Social</span></h4>
  <ul class="list-group" id="social">
    <li class="list-group-item"><a href="https://www.linkedin.com/in/taesik-na-a4555519"><i class="fa fa-linkedin-square fa-lg"></i> linkedin</a></li>
    <li class="list-group-item"><a href="https://github.com/taesikna"><i class="fa fa-github-square fa-lg"></i> github</a></li>
  </ul>
</li>
<!-- End Sidebar/Social -->
  </ul>
</section>
<!-- End Sidebar -->            </aside>
        </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2017 Taesik Na
            &middot; Powered by <a href="https://github.com/getpelican/pelican-themes/tree/master/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="https://taesikna.github.io/theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="https://taesikna.github.io/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="https://taesikna.github.io/theme/js/respond.min.js"></script>




</body>
</html>